# API Endpoints لربط النظام بقاعدة البيانات

## 🎯 **المطلوب لربط النظام بقاعدة البيانات:**

### 1. **إنشاء API Server (Backend)**
```
src/TaqTask.Api/ ← موجود بالفعل
```

### 2. **API Endpoints المطلوبة:**

#### **🏢 Boards (اللوحات):**
```
GET    /api/boards           - جلب جميع اللوحات
POST   /api/boards           - إنشاء لوحة جديدة
PUT    /api/boards/{id}      - تحديث لوحة
DELETE /api/boards/{id}      - حذف لوحة
```

#### **📋 Cards (المهام):**
```
GET    /api/cards            - جلب جميع المهام
GET    /api/boards/{id}/cards - جلب مهام لوحة معينة
POST   /api/cards            - إنشاء مهمة جديدة
PUT    /api/cards/{id}       - تحديث مهمة
DELETE /api/cards/{id}       - حذف مهمة
```

#### **👥 Users (المستخدمين):**
```
GET    /api/users            - جلب جميع المستخدمين
POST   /api/users            - إنشاء مستخدم جديد
PUT    /api/users/{id}       - تحديث مستخدم
DELETE /api/users/{id}       - حذف مستخدم
```

#### **🏛️ Columns (الأعمدة):**
```
GET    /api/columns          - جلب جميع الأعمدة
POST   /api/columns          - إنشاء عمود جديد
PUT    /api/columns/{id}     - تحديث عمود
DELETE /api/columns/{id}     - حذف عمود
```

## 🔄 **كيف تعرف أن النظام متصل بقاعدة البيانات:**

### ✅ **علامات الاتصال الناجح:**

#### **1. في أدوات المطور (F12):**
- تبويب **Network** يظهر استعلامات HTTP
- ترى طلبات مثل: `POST /api/cards`, `GET /api/boards`
- الاستجابات تأتي من الخادم وليس localStorage

#### **2. في قاعدة البيانات:**
- افتح SQL Server Management Studio
- تصفح الجداول: `users`, `boards`, `cards`, إلخ
- ستجد البيانات محفوظة هناك

#### **3. اختبار بسيط:**
- أنشئ مهمة في المتصفح الأول
- افتح المتصفح الثاني (أو جهاز آخر)
- إذا ظهرت المهمة = متصل بقاعدة البيانات ✅
- إذا لم تظهر = ما زال محلي ❌

## 🛠️ **خطوات الربط:**

### **المرحلة 1: تشغيل API Server**
```bash
cd src/TaqTask.Api
dotnet run
```

### **المرحلة 2: تحديث Frontend**
تغيير الـ services لتستخدم API بدلاً من localStorage

### **المرحلة 3: اختبار الاتصال**
التأكد من أن البيانات تُحفظ في SQL Server

## 📊 **مقارنة سريعة:**

| الخاصية | حفظ محلي (localStorage) | حفظ في قاعدة البيانات |
|---------|------------------------|---------------------|
| **المكان** | متصفح المستخدم | خادم قاعدة البيانات |
| **الوصول** | جهاز واحد فقط | جميع الأجهزة |
| **الأمان** | منخفض | عالي |
| **النسخ الاحتياطي** | لا يوجد | متوفر |
| **التعاون** | غير ممكن | ممكن |
| **الاستمرارية** | يختفي بمسح cache | دائم |

## 🎯 **الخطوة التالية:**

لربط النظام بقاعدة البيانات، نحتاج:
1. **تشغيل API Server** (C# .NET)
2. **تحديث Frontend Services** لاستخدام HTTP بدلاً من localStorage
3. **اختبار الاتصال** والتأكد من الحفظ في SQL

هل تريد أن نبدأ بهذه الخطوات؟
